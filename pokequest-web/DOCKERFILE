FROM node:14.16.0-slim

ARG GOOGLE_CLIENT_ID
ARG MISSION_MANAGEMENT_ADMIN
ARG MISSION_MANAGEMENT
ARG POKEMON_MANAGEMENT
ARG TWIITER_URL

ENV GOOGLE_CLIENT_ID $GOOGLE_CLIENT_ID
ENV MISSION_MANAGEMENT_ADMIN $MISSION_MANAGEMENT_ADMIN
ENV MISSION_MANAGEMENT $MISSION_MANAGEMENT
ENV POKEMON_MANAGEMENT $POKEMON_MANAGEMENT
ENV TWIITER_URL $TWIITER_URL

# Create app directory and cd inside
WORKDIR /usr/src/app

COPY package.json .
COPY yarn.lock .

# install all the dependencies
RUN yarn install

# copy all folder contents
COPY . .

# build the application
RUN yarn build

CMD ["yarn", "start"]
